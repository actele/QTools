# 更新日志

本文档记录了 QTools 的所有重要变更。

## [2.3.0] - 2025-09-06

### 🎉 重大更新
- **核心重构**: 基于生产级油猴脚本 (CG Pro Net) 完全重构项目架构
- **双模式统一**: 油猴脚本和 Chrome 扩展现在基于统一的核心代码
- **版本同步**: 两种模式版本号统一为 v2.3.0

### ✨ 新增功能
- **全面网络监控**: 
  - 新增 `sendBeacon` API 监控
  - 新增 `EventSource` (SSE) 连接监控  
  - 新增 `WebSocket` 连接监控
  - 支持所有主流网络 API 的完整拦截

- **增强 Cookie 管理**:
  - 智能 Cookie 合并算法，整合多个数据源
  - 跨路径 Cookie 探测 (`/admin`, `/api`, `/login` 等)
  - Cookie Store API 支持
  - Chrome 扩展 Cookie API 集成

- **高级过滤系统**:
  - 正则表达式过滤规则支持
  - 同源/跨域请求控制
  - 内置 API 路径匹配规则
  - 动态过滤规则更新

- **安全与隐私**:
  - 金融网站域名黑名单保护
  - 自动检测敏感域名并停止监控
  - 本地数据存储，零服务器依赖

- **数据导出增强**:
  - 标准 HAR (HTTP Archive) 格式导出
  - 改进的 JSON 数据结构
  - 请求/响应体大小限制 (128KB)
  - 数据截断和压缩优化

### 🎨 UI/UX 改进
- **全新界面设计**:
  - 现代化渐变背景和毛玻璃效果
  - 响应式布局，支持移动端显示
  - 实时数据更新，无需手动刷新
  - 浮动按钮支持拖拽定位

- **交互体验优化**:
  - 状态指示器和进度反馈
  - Toast 消息提示系统
  - 错误处理和降级机制
  - 键盘快捷键支持

### 🔧 技术改进
- **架构优化**:
  - 模块化代码结构，提高可维护性
  - 统一的配置管理系统
  - 改进的错误处理和日志系统
  - 内存使用优化，支持长时间运行

- **性能提升**:
  - 异步数据处理，避免界面阻塞
  - 智能数据缓存和清理机制
  - 网络拦截性能优化
  - 减少不必要的 DOM 操作

- **兼容性增强**:
  - Manifest V3 完全兼容
  - 现代浏览器 API 适配
  - 降级处理和 polyfill 支持
  - 跨平台测试覆盖

### 🐛 问题修复
- 修复 content script 重复注入问题
- 修复 Cookie 解析中的特殊字符处理
- 修复网络请求重复记录问题
- 修复界面在某些网站下的样式冲突
- 修复数据导出时的内存泄漏
- 修复扩展权限检查逻辑

### 📦 依赖更新
- 更新至 Manifest V3 规范
- 移除过时的 API 调用
- 优化扩展权限声明
- 减少第三方依赖

### 🔄 迁移指南
- **从 v1.x 升级**: 
  - 数据格式完全兼容，无需额外操作
  - 新增配置项将使用默认值
  - 建议重新安装以获得最佳体验

- **油猴脚本用户**:
  - 建议更新到最新版本脚本
  - 新版本包含重要安全修复
  - 配置数据将自动迁移

### ⚠️ 重要变更
- **配置数据结构调整**: 部分配置键名已变更
- **API 接口更新**: 内部 API 接口有破坏性变更
- **权限要求**: Chrome 扩展需要新的权限声明

---

## [1.0.0] - 2025-08-28

### 新增功能
- 🎉 初始版本发布
- 🍪 Cookie 采集与导出功能
  - 支持页面可见 Cookie 读取
  - Chrome 扩展模式下支持更多 Cookie 信息
  - 规则化筛选功能
- 🌐 网络请求拦截功能
  - 非侵入式 Hook fetch 和 XMLHttpRequest
  - 记录请求详细信息（URL、方法、状态码、耗时等）
  - 支持白名单/黑名单过滤
- 📊 数据可视化
  - 浮动面板界面
  - 实时统计显示
  - 请求列表展示
- 💾 数据导出
  - JSON 格式导出
  - CSV 格式导出
  - 数据匿名化选项
- 🔧 双形态支持
  - Tampermonkey 油猴脚本版本
  - Chrome Extension MV3 版本
- ⚙️ 配置选项
  - 可配置的拦截规则
  - 数据匿名化设置
  - 面板显示控制
- 🎯 开发者友好
  - 模块化设计
  - 详细的 API 文档
  - 易于扩展的架构

### 技术特性
- ES6+ 语法支持
- 非侵入式网络拦截
- 本地数据存储（localStorage/IndexedDB）
- 响应式 UI 设计
- 跨浏览器兼容

### 已知限制
- HttpOnly Cookie 无法通过脚本读取
- 部分网站可能有 CSP 限制
- 需要手动安装和配置

---

## 版本说明

- **主版本号** (Major): 包含重大架构变更或不兼容更新
- **次版本号** (Minor): 新增功能或重要改进
- **修订版本号** (Patch): 问题修复和小改进

## 贡献指南

欢迎提交 Issue 和 Pull Request 来帮助改进 QTools！

## 许可证

本项目采用 MIT 许可证，详见 [LICENSE](LICENSE) 文件。
